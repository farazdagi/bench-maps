Adapted from https://github.com/xacrimon/conc-map-bench 